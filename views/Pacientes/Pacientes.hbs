<div id="wrapper">
{{> sidebar}}
<div id="page-wrapper">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Pacientes</h1>
            </div>

            <!-- /.col-lg-12 -->
        </div>

        <!-- row -->
        <div class="row">
            <div class="col-lg-3 col-md-6">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3">
                                <i class="fa fa-users fa-5x"></i>
                            </div>
                            <div class="col-xs-9 text-right">
                                <div class="huge">{{total}}</div>
                                <div>Pacientes</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- /row -->
        <!-- table -->
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-lg-10" style="font-size: 20px;  vertical-align: middle;">
                                <div>
                                    <p>Listado de pacientes</p>
                                </div>
                            </div>
                            <div class="col-lg-2 right"><button class="btn btn-primary" id="btnNuevoPaciente" style="font-size: 18px" >Crear Paciente</button></div>
                        </div>
                    </div>
                    <div class="panel-body">
                      
                        <table id="example" class="display" style="width:100%; font-size:17px;">
                           
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- /.container-fluid -->

</div>
</div>


{{> footer}}

<script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
{{!-- <script src="../js/dataTables/jquery.dataTables.min.js"></script>
<script src="../js/dataTables/dataTables.bootstrap.min.js"></script> --}}



<script>
    $(document).ready(function() {
        let nuevoPacienteBtn = document.getElementById("btnNuevoPaciente");

        nuevoPacienteBtn.addEventListener('click',() => {
            window.location.href = "/paciente/nuevo/"
        })
     
        let pacientes = "{{pacientes}}"
        let pacientesData = JSON.parse(pacientes.replace(/&quot;/g,'"'))
 
        $('#example').DataTable(
            {
                "data":pacientesData,
                "ordering":false,
                "columns":[
                    {"title":"Nombres"},
                    {"title":"Apellidos"},
                    {"title":"Edad"},
                    {"title":"Telefono"},
                    {"title":"Telefono 2"},
                    {"title":"--- ---"}
                    
                ],
                "columnDefs":[{
                    "targets":5,
                    "render": function(data,type,full,meta){
                        
                        return `<a href="/pacientes/expediente/${data}"><i class="fa fa-address-card" style="font-size:30px;"></i></a>`
                    }
                }]
            }
        );
    } );
</script>